(self.webpackChunkeditor_demo=self.webpackChunkeditor_demo||[]).push([[8175],{8175:(t,o,e)=>{e.r(o),e.d(o,{default:()=>y});var n=e(6610),i=e(2978),r=e(7222),c=e(7492),s=e(8627),a=e(540),u=e(8361),d=e(6347);function l(t){return o=>(t.loading$.next(!0),(0,u.p)(o.map(o=>t.upload(o))).pipe((0,d.j)(()=>t.loading$.next(!1))))}var p=e(3308),f=e(5981),h=e(8240),m=e(3527);let E=(()=>{var t;class o{constructor(){this.loading$=new f.t(!1)}upload(t){const o=new FormData;return o.append("file",t,t.name),o.append("expires","1d"),o.append("autoDelete","true"),(0,h.H)(fetch("https://file.io/",{mode:"no-cors",method:"POST",body:o}).then(function(){var t=(0,p.A)(function*(t){return t.json()});return function(o){return t.apply(this,arguments)}}())).pipe((0,m.T)(t=>({name:t.name,link:t.link,attrs:{class:"file-link"}})))}}return(t=o).ɵfac=function(o){return new(o||t)},t.ɵprov=i.jDH({token:t,factory:t.ɵfac,providedIn:"root"}),o})();var T=e(6173),k=e(1333),v=e(7920);function w(t,o){if(1&t&&(i.qex(0),i.nrm(1,"tui-editor-socket",5),i.bVm()),2&t){const t=i.XpG();i.R7$(1),i.Y8G("content",t.control.value)}}function b(t,o){if(1&t&&(i.qex(0),i.EFF(1),i.bVm()),2&t){const t=i.XpG();i.R7$(1),i.SpI(" ",t.control.value," ")}}const y=(()=>{var t;class o{constructor(){this.fileIoService=(0,i.WQX)(E),this.isE2E=(0,i.WQX)(c.Hs),this.builtInTools=[a.TuiEditorTool.Undo,a.TuiEditorTool.Link,a.TuiEditorTool.Attach],this.control=new r.MJ("")}attach(t){t.forEach(t=>this.wysiwyg?.editor?.setFileLink(t))}}return(t=o).ɵfac=function(o){return new(o||t)},t.ɵcmp=i.VBU({type:t,selectors:[["ng-component"]],viewQuery:function(t,o){if(1&t&&i.GBs(a.TuiEditor,5),2&t){let t;i.mGM(t=i.lsd())&&(o.wysiwyg=t.first)}},standalone:!0,features:[i.Jv_([(0,a.provideTuiEditor)(),{provide:a.TUI_ATTACH_FILES_LOADER,deps:[E],useFactory:l}]),i.aNF],decls:12,vars:8,consts:[[3,"showLoader"],[1,"editor",3,"formControl","tools","fileAttached"],[3,"closeOthers"],[3,"tuiAccordion"],[4,"tuiItem"],[3,"content"]],template:function(t,o){1&t&&(i.j41(0,"tui-loader",0),i.nI1(1,"async"),i.j41(2,"tui-editor",1),i.bIt("fileAttached",function(t){return o.attach(t)}),i.k0s()(),i.j41(3,"tui-accordion",2)(4,"button",3),i.EFF(5,"HTML"),i.k0s(),i.j41(6,"tui-expand"),i.DNE(7,w,2,1,"ng-container",4),i.k0s(),i.j41(8,"button",3),i.EFF(9,"Text"),i.k0s(),i.j41(10,"tui-expand"),i.DNE(11,b,2,1,"ng-container",4),i.k0s()()),2&t&&(i.Y8G("showLoader",!!i.bMT(1,6,o.fileIoService.loading$)),i.R7$(2),i.Y8G("formControl",o.control)("tools",o.builtInTools),i.R7$(1),i.Y8G("closeOthers",!1),i.R7$(1),i.Y8G("tuiAccordion",o.isE2E),i.R7$(4),i.Y8G("tuiAccordion",o.isE2E))},dependencies:[n.Jj,r.X1,r.BC,r.l_,T.o3,T.S3,k.d,v.K,a.TuiEditor,a.TuiEditorSocket,s.ap],styles:[".editor[_ngcontent-%COMP%]     .tui-editor-socket .ProseMirror{min-block-size:10rem}"],changeDetection:0}),o})()}}]);