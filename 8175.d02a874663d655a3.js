(self.webpackChunkeditor_demo=self.webpackChunkeditor_demo||[]).push([[8175],{8175:(t,e,o)=>{o.r(e),o.d(e,{default:()=>T});var n=o(6610),r=o(2978),i=o(7222),a=o(4732),l=o(8627),s=o(1093),c=o(8361),u=o(6347);function d(t){return e=>(t.loading$.next(!0),(0,c.p)(e.map(e=>t.upload(e))).pipe((0,u.j)(()=>t.loading$.next(!1))))}var p=o(3308),f=o(5981),h=o(8240),m=o(3527);let v=(()=>{var t;class e{constructor(){this.loading$=new f.t(!1)}upload(t){const e=new FormData;return e.append("file",t,t.name),e.append("expires","1d"),e.append("autoDelete","true"),(0,h.H)(fetch("https://file.io/",{mode:"no-cors",method:"POST",body:e}).then(function(){var t=(0,p.A)(function*(t){return t.json()});return function(e){return t.apply(this,arguments)}}())).pipe((0,m.T)(t=>({name:t.name,link:t.link,attrs:{class:"file-link"}})))}}return(t=e).ɵfac=function(e){return new(e||t)},t.ɵprov=r.jDH({token:t,factory:t.ɵfac,providedIn:"root"}),e})();const T=(()=>{var t;class e{constructor(){this.fileIoService=(0,r.WQX)(v),this.builtInTools=[s.TuiEditorTool.Undo,s.TuiEditorTool.Link,s.TuiEditorTool.Attach],this.control=new i.MJ("")}attach(t){t.forEach(t=>this.wysiwyg?.editor?.setFileLink(t))}}return(t=e).ɵfac=function(e){return new(e||t)},t.ɵcmp=r.VBU({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&r.GBs(s.TuiEditor,5),2&t){let t;r.mGM(t=r.lsd())&&(e.wysiwyg=t.first)}},standalone:!0,features:[r.Jv_([(0,s.provideTuiEditor)(),{provide:s.TUI_ATTACH_FILES_LOADER,deps:[v],useFactory:d}]),r.aNF],decls:4,vars:6,consts:[[3,"showLoader"],[1,"editor",3,"formControl","tools","fileAttached"],[3,"value"]],template:function(t,e){1&t&&(r.j41(0,"tui-loader",0),r.nI1(1,"async"),r.j41(2,"tui-editor",1),r.bIt("fileAttached",function(t){return e.attach(t)}),r.k0s()(),r.nrm(3,"tui-content-table",2)),2&t&&(r.Y8G("showLoader",!!r.bMT(1,4,e.fileIoService.loading$)),r.R7$(2),r.Y8G("formControl",e.control)("tools",e.builtInTools),r.R7$(1),r.Y8G("value",e.control.value))},dependencies:[n.Jj,i.X1,i.BC,i.l_,a.C,s.TuiEditor,l.ap],styles:[".editor[_ngcontent-%COMP%]     .tui-editor-socket .ProseMirror{min-block-size:10rem}"],changeDetection:0}),e})()}}]);