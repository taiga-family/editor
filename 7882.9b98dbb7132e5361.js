(self.webpackChunkeditor_demo=self.webpackChunkeditor_demo||[]).push([[7882],{7882:(t,e,n)=>{n.r(e),n.d(e,{default:()=>p});var o=n(6610),i=n(2978),s=n(7212),r=n(7222),a=n(4732),l=n(5180),c=n(120),u=n(9707),d=n(6175);function h(t,e){if(1&t){const t=i.RV6();i.j41(0,"button",4),i.bIt("click",function(){const e=i.eBV(t).$implicit,n=i.XpG(2);return i.Njj(n.command(e))}),i.EFF(1),i.k0s()}if(2&t){const t=e.$implicit;i.R7$(1),i.SpI(" ",t.name," ")}}function g(t,e){if(1&t&&(i.j41(0,"tui-data-list"),i.DNE(1,h,2,1,"button",3),i.k0s()),2&t){const t=i.XpG();i.R7$(1),i.Y8G("ngForOf",t.filter(t.suggestion))}}const p=(()=>{var t;class e{constructor(){this.destroy$=(0,i.WQX)(i.abz),this.open=!0,this.builtInTools=[c.TuiEditorTool.Undo,c.TuiEditorTool.Bold,c.TuiEditorTool.Italic,c.TuiEditorTool.Link,c.TuiEditorTool.Anchor],this.control=new r.MJ(""),this.items=[{name:"Heading 1"},{name:"Heading 2"},{name:"Bold"},{name:"Italic"}]}ngOnInit(){this.control.valueChanges.pipe((0,s.pQ)(this.destroy$)).subscribe(()=>{const t=!!this.wysiwyg?.isLinkSelected,e=!!this.wysiwyg?.isMentionMode,n=!!this.wysiwyg?.selectionState.before.startsWith("/");this.open=!e&&!t&&n})}get suggestion(){const t=this.wysiwyg?.selectionState.before;return t?.startsWith("/")&&t.length>1&&t.replace("/","")||""}down(t,e){const n=Array.from(this.el?.querySelectorAll("button")??[]),o=e?n[0]:n[n.length-1];this.el?.contains(t.target)||o?.focus()}filter(t){return t?.length?this.items.filter(({name:e})=>e.toLocaleLowerCase().startsWith(t.toLocaleLowerCase())):this.items}command(t){const e=this.wysiwyg?.editor?.getOriginTiptapEditor();if(!e)return;const{from:n,to:o}=e.state.selection;switch(e.chain().focus().deleteRange({from:n-(this.suggestion.length+1),to:o}).run(),t.name){case"Bold":e.chain().toggleBold().run();break;case"Heading 1":e.chain().setNode("heading",{level:1}).run();break;case"Heading 2":e.chain().setNode("heading",{level:2}).run();break;case"Italic":e.chain().toggleItalic().run()}}get el(){return this.datalist?.nativeElement??null}}return(t=e).ɵfac=function(e){return new(e||t)},t.ɵcmp=i.VBU({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(i.GBs(c.TuiEditor,7),i.GBs(l.uE,5,i.aKT)),2&t){let t;i.mGM(t=i.lsd())&&(e.wysiwyg=t.first),i.mGM(t=i.lsd())&&(e.datalist=t.first)}},hostBindings:function(t,e){1&t&&i.bIt("keydown.arrowUp",function(t){return e.down(t,!1)},!1,i.tSv)("keydown.arrowDown",function(t){return e.down(t,!0)},!1,i.tSv)},standalone:!0,features:[i.Jv_([{provide:c.TUI_EDITOR_EXTENSIONS,useFactory:()=>[Promise.resolve().then(n.bind(n,120)).then(({TuiStarterKit:t})=>t),n.e(5377).then(n.bind(n,5377)).then(({TextStyle:t})=>t),Promise.resolve().then(n.bind(n,120)).then(({TuiLink:t})=>t),Promise.resolve().then(n.bind(n,120)).then(({TuiJumpAnchor:t})=>t)]}]),i.aNF],decls:3,vars:4,consts:[[3,"formControl","tools","tuiDropdownOpen","tuiDropdownOpenChange"],[4,"tuiTextfieldDropdown"],[3,"value"],["tuiOption","","type","button",3,"click",4,"ngFor","ngForOf"],["tuiOption","","type","button",3,"click"]],template:function(t,e){1&t&&(i.j41(0,"tui-editor",0),i.bIt("tuiDropdownOpenChange",function(t){return e.open=t}),i.DNE(1,g,2,1,"tui-data-list",1),i.k0s(),i.nrm(2,"tui-content-table",2)),2&t&&(i.Y8G("formControl",e.control)("tools",e.builtInTools)("tuiDropdownOpen",e.open),i.R7$(2),i.Y8G("value",e.control.value))},dependencies:[o.Sq,r.X1,r.BC,r.l_,a.C,l.uE,l.aO,u.P0,c.TuiEditor,d.U9],encapsulation:2,changeDetection:0}),e})()}}]);