(self.webpackChunkeditor_demo=self.webpackChunkeditor_demo||[]).push([[7882],{7882:(t,n,o)=>{o.r(n),o.d(n,{default:()=>b});var e=o(6610),i=o(2978),s=o(7212),r=o(7222),c=o(7492),a=o(5180),l=o(540),u=o(6173),d=o(1333),h=o(7920),g=o(9707),p=o(6175);function f(t,n){if(1&t){const t=i.RV6();i.j41(0,"button",6),i.bIt("click",function(){const n=i.eBV(t).$implicit,o=i.XpG(2);return i.Njj(o.command(n))}),i.EFF(1),i.k0s()}if(2&t){const t=n.$implicit;i.R7$(1),i.SpI(" ",t.name," ")}}function m(t,n){if(1&t&&(i.j41(0,"tui-data-list"),i.DNE(1,f,2,1,"button",5),i.k0s()),2&t){const t=i.XpG();i.R7$(1),i.Y8G("ngForOf",t.filter(t.suggestion))}}function w(t,n){if(1&t&&(i.qex(0),i.nrm(1,"tui-editor-socket",7),i.bVm()),2&t){const t=i.XpG();i.R7$(1),i.Y8G("content",t.control.value)}}function E(t,n){if(1&t&&(i.qex(0),i.EFF(1),i.bVm()),2&t){const t=i.XpG();i.R7$(1),i.SpI(" ",t.control.value," ")}}const b=(()=>{var t;class n{constructor(){this.destroy$=(0,i.WQX)(i.abz),this.isE2E=(0,i.WQX)(c.Hs),this.open=!0,this.builtInTools=[l.TuiEditorTool.Undo,l.TuiEditorTool.Bold,l.TuiEditorTool.Italic,l.TuiEditorTool.Link,l.TuiEditorTool.Anchor],this.control=new r.MJ(""),this.items=[{name:"Heading 1"},{name:"Heading 2"},{name:"Bold"},{name:"Italic"}]}ngOnInit(){this.control.valueChanges.pipe((0,s.pQ)(this.destroy$)).subscribe(()=>{const t=!!this.wysiwyg?.isLinkSelected,n=!!this.wysiwyg?.isMentionMode,o=!!this.wysiwyg?.selectionState.before.startsWith("/");this.open=!n&&!t&&o})}get suggestion(){const t=this.wysiwyg?.selectionState.before;return t?.startsWith("/")&&t.length>1&&t.replace("/","")||""}down(t,n){const o=Array.from(this.el?.querySelectorAll("button")??[]),e=n?o[0]:o[o.length-1];this.el?.contains(t.target)||e?.focus()}filter(t){return t?.length?this.items.filter(({name:n})=>n.toLocaleLowerCase().startsWith(t.toLocaleLowerCase())):this.items}command(t){const n=this.wysiwyg?.editor?.getOriginTiptapEditor();if(!n)return;const{from:o,to:e}=n.state.selection;switch(n.chain().focus().deleteRange({from:o-(this.suggestion.length+1),to:e}).run(),t.name){case"Bold":n.chain().toggleBold().run();break;case"Heading 1":n.chain().setNode("heading",{level:1}).run();break;case"Heading 2":n.chain().setNode("heading",{level:2}).run();break;case"Italic":n.chain().toggleItalic().run()}}get el(){return this.datalist?.nativeElement??null}}return(t=n).ɵfac=function(n){return new(n||t)},t.ɵcmp=i.VBU({type:t,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&(i.GBs(l.TuiEditor,7),i.GBs(a.uE,5,i.aKT)),2&t){let t;i.mGM(t=i.lsd())&&(n.wysiwyg=t.first),i.mGM(t=i.lsd())&&(n.datalist=t.first)}},hostBindings:function(t,n){1&t&&i.bIt("keydown.arrowUp",function(t){return n.down(t,!1)},!1,i.tSv)("keydown.arrowDown",function(t){return n.down(t,!0)},!1,i.tSv)},standalone:!0,features:[i.Jv_([(0,l.provideTuiEditor)()]),i.aNF],decls:11,vars:6,consts:[[3,"formControl","tools","tuiDropdownOpen","tuiDropdownOpenChange"],[4,"tuiTextfieldDropdown"],[3,"closeOthers"],[3,"tuiAccordion"],[4,"tuiItem"],["tuiOption","","type","button",3,"click",4,"ngFor","ngForOf"],["tuiOption","","type","button",3,"click"],[3,"content"]],template:function(t,n){1&t&&(i.j41(0,"tui-editor",0),i.bIt("tuiDropdownOpenChange",function(t){return n.open=t}),i.DNE(1,m,2,1,"tui-data-list",1),i.k0s(),i.j41(2,"tui-accordion",2)(3,"button",3),i.EFF(4,"HTML"),i.k0s(),i.j41(5,"tui-expand"),i.DNE(6,w,2,1,"ng-container",4),i.k0s(),i.j41(7,"button",3),i.EFF(8,"Text"),i.k0s(),i.j41(9,"tui-expand"),i.DNE(10,E,2,1,"ng-container",4),i.k0s()()),2&t&&(i.Y8G("formControl",n.control)("tools",n.builtInTools)("tuiDropdownOpen",n.open),i.R7$(2),i.Y8G("closeOthers",!1),i.R7$(1),i.Y8G("tuiAccordion",n.isE2E),i.R7$(4),i.Y8G("tuiAccordion",n.isE2E))},dependencies:[e.Sq,r.X1,r.BC,r.l_,u.o3,u.S3,d.d,h.K,a.uE,a.aO,g.P0,l.TuiEditor,l.TuiEditorSocket,p.U9],encapsulation:2,changeDetection:0}),n})()}}]);